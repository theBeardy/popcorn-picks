{% load static tailwind_tags %}
<head>
    <title>{% block title %}Popcorn Picks{% endblock %}</title>
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png" href="{% static 'favicon.png' %}">
    <script src="https://kit.fontawesome.com/b7e64cc3fa.js" crossorigin="anonymous"></script>
	{% tailwind_css %}
</head>

<div class="grid grid-cols-10 w-ful bg-light-4 dark:bg-dark-4 p-12">
    <div class="col-span-3 p-4">
        <h1 class="font-default text-light-text-2 dark:text-dark-text-2 mb-4">Submit your rating for <p>{{ movie.title }}</p></h1>
        <img 
            src="{{ movie.poster_url}}" 
            alt="Thumbnail for {{ movie.title }}"
            class="w-36 aspect-2/3"
        >
    </div>
    <div class="col-span-7 p-4 flex justify-center bg-light-2 dark:bg-dark-2 rounded-md">
        <form 
            method="POST"
            action="{% url 'film_ratings:review_new' movie.id %}"
            hx-target="#dialog-content"
            hx-swap="innerHTML"
            class="space-y-4"
        >
            {% csrf_token %}
            <div class="mt-4">
                <input type="hidden" id="movie_id" name="movie_id" value={{ movie.id }}>
                <input type="hidden" id="tmdb_id" name="tmdb_id" value={{ movie.tmdb_id }}>
                {% for field in form %}
                    {% if field.name != 'movie_title' and field.name != 'average' and field.name != 'recommend' %}
                        <div class="grid grid-cols-3 rounded-md">
                            <label for="{{ field.id_for_label }}" class="col-span-2 font-xs font-default text-light-text dark:text-dark-text">
                                {% if field.label == "Fun_to_watch" %}
                                    This film is fun to watch
                                {% elif field.label == "Crying" %}
                                    <span class="relative group">
                                        This film is meaningful to me
                                    </span>
                                    <span class="ml-1 text-light-4 dark:text-dark-4 cursor-pointer group relative">
                                    <i class="fa-solid fa-circle-info"></i>
                                        <span class="scale-0 absolute bottom-full mb-2 w-48 px-2 py-1 text-sm text-light-text dark:text-dark-text bg-light-2 dark:bg-dark-2 rounded shadow-lg opacity-0 group-hover:opacity-100 group-hover:scale-100 transition-opacity duration-300 z-10">
                                            <p>I cry when a movie is meaningful to me. So this is my scale: </p>
                                            <div class="w-[80%] mx-auto">
                                                <p class="font-sans mb-0.5">0-5 = Active cringe</p>
                                                <p class="font-sans mb-0.5">5 = Neutral</p>
                                                <p class="font-sans mb-0.5">5-7 = I cried the first time, but not every time</p>
                                                <p class="font-sans mb-0.5">8-10 = I cry everytime</p>
                                            </div>
                                            <p>Perfectly fine if your scale for meaning is different</p>
                                        </span>
                                    </span>
                                {% elif field.label == "Visuals" %}
                                    I love the visuals of this movie
                                {% elif field.label == "Acting" %}
                                    The acting is compelling
                                {% elif field.label == "Meaning" %}
                                    This film makes me think
                                {% elif field.label == "Dialogue" %}
                                    The dialog is memorable and interesting
                                {% elif field.label == "Genre" %}
                                    This film is a good execution of its genre
                                {% elif field.label == "Rewatch" %}
                                    I could rewatch this movie any time
                                {% else %}
                                    {{ field.label }}
                                {% endif %}
                            </label>
                            <div class="col-span-1 mb-2 flex gap-4">
                                {{ field }}
                            </div>
                            {% if field.errors %}
                                <p class="text-text-error text-sm mt-1">{{ field.errors }}</p>
                            {% endif %}
                        </div>
                    {% endif %}
                {% endfor %}
            </div>
            <div class="mt-[50px]">
                <button type="submit" class="font-default text-xl w-[200px] text-light-text-2 bg-light-3  hover:bg-accent-light dark:text-dark-text-2 dark:bg-dark-3 dark:hover:bg-accent-dark dark:hover:text-dark-text duration-250 focus:ring-4 focus:outline-none focus:ring-green-300 font-medium rounded-lg px-5 py-2.5 text-center me-2 mb-2">Submit</button>
            </div>
        </form>
    </div>
    
</div>