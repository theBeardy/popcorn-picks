{% extends "base.html" %}
{% load static %}
{% block content %}
  <h1 class="text-center object-center text-3xl font-default text-light-text dark:text-dark-text m-12">Your Reviewed Films</h1>
  <div class="flex justify-center p-8">
    
    {% if user_review_data %}
      <div class="flex justify-center m-4">
        <div class="w-full h-[60vh] relative overflow-y-scroll rounded-lg">
          <table class="w-full text-sm text-left text-light-text dark:text-dark-text">
              <thead class="sticky top-0 z-10 text-xs text-light-text-2 uppercase bg-light-3 dark:bg-dark-3 dark:text-dark-text-2">
                  <tr>
                      {% comment %} <th scope="col" class="px-6 py-3">
                          <div class="flex items-center">
                            <a href="#" class="flex items-center">Overall Rank
                              <i class="mx-2 fa-solid fa-sort"></i>
                            </a>
                          </div>
                      </th> {% endcomment %}
                      <th scope="col" class="px-6 py-3">
                          
                      </th>
                      <th scope="col" class="px-6 py-3">
                          <div class="flex items-center">
                            <a href="#" class="flex items-center">Film Title
                              <i class="mx-2 fa-solid fa-sort"></i>
                            </a>
                          </div>
                      </th>
                      <th scope="col" class="px-6 py-3">
                          <div class="flex items-center">
                            <a href="#" class="flex items-center">Your Rating
                              <i class="mx-2 fa-solid fa-sort"></i>
                            </a>
                          </div>
                      </th>
                      <th scope="col" class="px-6 py-3">
                          <span class="sr-only">Edit</span>
                      </th>
                  </tr>
              </thead>
              <tbody>
                {% for film in user_review_data %}    
                  <tr class="bg-light-2 border-b dark:bg-dark-2 dark:border-accent-dark border-accent-light">
                    <th scope="row" class="px-6 py-4 font-medium text-light-text whitespace-nowrap dark:text-dark-text">
                      <a href="{% url 'film_ratings:film_details' film.movie_title.id %}">    
                        <img 
                          src="{{ film.movie_title.poster_url }}" 
                          alt="Poster for {{ film.movie_title.title }}"
                          class="min-w-16 sm:w-24 aspect-[2/3] rounded shadow-black shadow-sm lg:shadow-md"
                        />
                      </a>
                    </th>
                    <td class="px-6 py-4 text-xl font-bold">
                        <a href={% url 'film_ratings:film_details' film.movie_title.id %}>
                          {{ film.movie_title.title }} <p class="font-light text-lg">({{ film.movie_title.release_year }})</p>
                        </a>
                    </td>
                    <td class="px-6 py-4 text-lg font-alt">
                        {{ film.average_score|floatformat:2 }}
                    </td>
                    <td class="px-6 py-4 text-right">
                        <a href="#" class="font-medium text-blue-600 dark:text-blue-500 hover:underline">Edit</a>
                    </td>
                  </tr>
                  {% endfor %}
              </tbody>
          </table>
        </div>

        
      </div>
    </div>
    
    {% else %}
      <p class="text-white">No Reviews Found.</p>
    {% endif %}
  </div>
{% endblock %}